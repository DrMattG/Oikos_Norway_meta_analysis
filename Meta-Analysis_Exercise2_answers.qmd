---
title: "Answers: Standardised regression coefficients"
format: html
editor: visual
---

## Load packages

```{r}
#| echo: true
#| message: false
#| warning: false
library(dplyr)
library(metafor)
```



*Study 1*: Temperate Forest

A study in New Hampshire found that insect abundance increased by 2.3 individuals per °C (SE = 0.6). The standard deviation of temperature was 3.8°C, and the SD of abundance was 18.5.

*Study 2*: Agricultural Field

Regression slope: 1.1 (SE = 0.3). SD of temp = 4.2; SD of abundance = 12.3

*Study 3*: Tropical Rainforest

β = 0.9 (SE = 0.2); SD_temp = 2.5, SD_abundance = 6.0

*Study 4*: Urban Garden Network

The slope of the regression was 3.4 individuals per °C (SE = 0.9). SD of temp = 5.1, SD of abundance = 20.1.

*Study 5*: Alpine Meadow

Insects were more sensitive in colder climates: β = 1.7 (SE = 0.5), with SD of temp = 3.0 and SD of abundance = 10.2.

## Combine Your Results
```{r}
#| echo: true
#| message: false
#| warning: false

dat <- data.frame(
  study = paste0("Study_", 1:5),
  beta_raw = c(2.3, 1.1, 0.9, 3.4, 1.7),
  se_raw   = c(0.6, 0.3, 0.2, 0.9, 0.5),
  sd_temp  = c(3.8, 4.2, 2.5, 5.1, 3.0),
  sd_abund = c(18.5, 12.3, 6.0, 20.1, 10.2)
)

dat <- dat |>
  mutate(
    beta_std = beta_raw * (sd_temp / sd_abund),
    se_std = se_raw * (sd_temp / sd_abund),
    vi_std = se_std^2
  )

dat
```

## Meta-Analysis and Forest Plot

```{r}

res <- rma.mv(beta_std, vi_std,random = ~ 1 | study,  data = dat)
summary(res)


```



```{r}
forest(res, slab = dat$study,
       xlab = "Standardised Effect (SD change in abundance per SD temp)")

```

